System.register([],function($){"use strict";return{execute:function(){$("atom",N);let L=0;function N(s,a){const v=`atom${++L}`,g={toString:()=>v};return typeof s=="function"?g.read=s:(g.init=s,g.read=R,g.write=T),a&&(g.write=a),g}function R(s){return s(this)}function T(s,a,v){return a(this,typeof v=="function"?v(s(this)):v)}const M=(s,a)=>s.unstable_is?s.unstable_is(a):a===s,A=s=>"init"in s,O=s=>!!s.write,m=new WeakMap,U=(s,a)=>{m.set(s,a),s.catch(()=>{}).finally(()=>m.delete(s))},_=(s,a)=>{const v=m.get(s);v&&(m.delete(s),v(a))},C=(s,a)=>{s.status="fulfilled",s.value=a},q=(s,a)=>{s.status="rejected",s.reason=a},V=s=>typeof(s==null?void 0:s.then)=="function",E=(s,a)=>!!s&&"v"in s&&"v"in a&&Object.is(s.v,a.v),x=(s,a)=>!!s&&"e"in s&&"e"in a&&Object.is(s.e,a.e),S=s=>!!s&&"v"in s&&s.v instanceof Promise,K=(s,a)=>"v"in s&&"v"in a&&s.v.orig&&s.v.orig===a.v.orig,y=s=>{if("e"in s)throw s.e;return s.v},B=()=>{const s=new WeakMap,a=new WeakMap,v=[],g=new WeakMap,w=t=>s.get(t),k=(t,r)=>{r.d.forEach((l,n)=>{if(!g.has(n)){const e=w(n);g.set(n,[e,new Set]),e&&k(n,e)}g.get(n)[1].add(t)})},F=(t,r)=>{var l;const n=w(t);if(s.set(t,r),(l=v[v.length-1])==null||l.add(t),g.has(t)||(g.set(t,[n,new Set]),k(t,r)),S(n)){const e="v"in r?r.v instanceof Promise?r.v:Promise.resolve(r.v):Promise.reject(r.e);n.v!==e&&_(n.v,e)}},G=(t,r,l,n)=>{const e=new Map(n?r.d:null);let c=!1;l.forEach((o,i)=>{!o&&M(t,i)&&(o=r),o&&(e.set(i,o),r.d.get(i)!==o&&(c=!0))}),(c||r.d.size!==e.size)&&(r.d=e)},z=(t,r,l,n)=>{const e=w(t),c={d:(e==null?void 0:e.d)||new Map,v:r};if(l&&G(t,c,l,n),E(e,c)&&e.d===c.d)return e;if(S(e)&&S(c)&&K(e,c)){if(e.d===c.d)return e;c.v=e.v}return F(t,c),c},H=(t,r,l,n)=>{if(V(r)){let e;const c=()=>{const i=w(t);if(!S(i)||i.v!==o)return;const f=z(t,o,l);a.has(t)&&i.d!==f.d&&J(t,f,i.d)},o=new Promise((i,f)=>{let u=!1;r.then(d=>{u||(u=!0,C(o,d),i(d),c())},d=>{u||(u=!0,q(o,d),f(d),c())}),e=d=>{u||(u=!0,d.then(h=>C(o,h),h=>q(o,h)),i(d))}});return o.orig=r,o.status="pending",U(o,i=>{i&&(e(i),n==null||n())}),z(t,o,l,!0)}return z(t,r,l)},Q=(t,r,l)=>{const n=w(t),e={d:(n==null?void 0:n.d)||new Map,e:r};return l&&G(t,e,l),x(n,e)&&n.d===e.d?n:(F(t,e),e)},p=(t,r)=>{const l=w(t);if(!(r!=null&&r(t))&&l&&(a.has(t)||Array.from(l.d).every(([u,d])=>{if(u===t)return!0;const h=p(u,r);return h===d||E(h,d)})))return l;const n=new Map;let e=!0;const c=u=>{if(M(t,u)){const h=w(u);if(h)return n.set(u,h),y(h);if(A(u))return n.set(u,void 0),u.init;throw new Error("no atom init")}const d=p(u,r);return n.set(u,d),y(d)};let o,i;const f={get signal(){return o||(o=new AbortController),o.signal},get setSelf(){return!i&&O(t)&&(i=(...u)=>{if(!e)return D(t,...u)}),i}};try{const u=t.read(c,f);return H(t,u,n,()=>o==null?void 0:o.abort())}catch(u){return Q(t,u,n)}finally{e=!1}},X=t=>y(p(t)),Y=t=>{const r=i=>{var f,u;const d=new Set((f=a.get(i))==null?void 0:f.t);return(u=g.get(i))==null||u[1].forEach(h=>{d.add(h)}),d},l=new Array,n=new Set,e=i=>{if(!n.has(i)){n.add(i);for(const f of r(i))i!==f&&e(f);l.push(i)}};e(t);const c=new Set([t]),o=i=>n.has(i);for(let i=l.length-1;i>=0;--i){const f=l[i],u=w(f);if(!u)continue;let d=!1;for(const h of u.d.keys())if(h!==f&&c.has(h)){d=!0;break}if(d){const h=p(f,o);k(f,h),E(u,h)||c.add(f)}n.delete(f)}},I=(t,...r)=>{const l=e=>y(p(e)),n=(e,...c)=>{const o=v.length>0;o||v.push(new Set([e]));let i;if(M(t,e)){if(!A(e))throw new Error("atom not writable");const f=w(e),u=H(e,c[0]);E(f,u)||Y(e)}else i=I(e,...c);return o||W(v.pop()),i};return t.write(l,n,...r)},D=(t,...r)=>{v.push(new Set([t]));const l=I(t,...r);return W(v.pop()),l},P=(t,r,l)=>{var n;const e=a.get(t);if(e)return r&&e.t.add(r),e;const c=l||[];(n=w(t))==null||n.d.forEach((i,f)=>{f!==t&&P(f,t,c)}),p(t);const o={t:new Set(r&&[r]),l:new Set};if(a.set(t,o),O(t)&&t.onMount){const{onMount:i}=t;c.push(()=>{const f=i((...u)=>D(t,...u));f&&(o.u=f)})}return l||c.forEach(i=>i()),o},Z=(t,r)=>!r.l.size&&(!r.t.size||r.t.size===1&&r.t.has(t)),j=(t,r)=>{if(!Z(t,r))return;const l=r.u;l&&l(),a.delete(t);const n=w(t);n&&(S(n)&&_(n.v),n.d.forEach((e,c)=>{if(c!==t){const o=a.get(c);o&&(o.t.delete(t),j(c,o))}}))},J=(t,r,l)=>{const n=new Set(r.d.keys()),e=new Set;l==null||l.forEach((c,o)=>{if(n.has(o)){n.delete(o);return}e.add(o);const i=a.get(o);i&&i.t.delete(t)}),n.forEach(c=>{P(c,t)}),e.forEach(c=>{const o=a.get(c);o&&j(c,o)})},W=t=>{const r=[],l=n=>{var e;if(!g.has(n))return;const[c,o]=g.get(n);g.delete(n),r.push([n,c]),o.forEach(l),(e=w(n))==null||e.d.forEach((i,f)=>l(f))};t.forEach(l),r.forEach(([n,e])=>{const c=w(n);if(c&&c!==e){const o=a.get(n);o&&c.d!==(e==null?void 0:e.d)&&J(n,c,e==null?void 0:e.d),o&&!(!S(e)&&(E(e,c)||x(e,c)))&&o.l.forEach(i=>i())}})};return{get:X,set:D,sub:(t,r)=>{const l=P(t);W([t]);const n=l.l;return n.add(r),()=>{n.delete(r),j(t,l)}}}};let b;$({createStore:B,getDefaultStore:()=>(b||(b=B()),b)})}}});
